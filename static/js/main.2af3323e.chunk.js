(this["webpackJsonppetal-may_jasmine"]=this["webpackJsonppetal-may_jasmine"]||[]).push([[0],{12:function(e,t,a){e.exports={homeNav:"HomeStyle_homeNav__21meu",homeUl:"HomeStyle_homeUl__1dh51",homeLink:"HomeStyle_homeLink__vOyH-",homeLi:"HomeStyle_homeLi__2GV0C",logoName:"HomeStyle_logoName__1UrQY",homeDep:"HomeStyle_homeDep__1BUmy",textBox:"HomeStyle_textBox__PXw8o",homeInput:"HomeStyle_homeInput__1KiBX",homeFileBox:"HomeStyle_homeFileBox__14ikv",together:"HomeStyle_together__3JZvF",viewBox:"HomeStyle_viewBox__Zij8P",clearBtn:"HomeStyle_clearBtn__24L1k",contentsBox:"HomeStyle_contentsBox__2NRCj",contents:"HomeStyle_contents__cnsSH",ownBox:"HomeStyle_ownBox__23OnX",ownBtn:"HomeStyle_ownBtn__x5Xdh",editBtn:"HomeStyle_editBtn__2FS-H",cancelBtn:"HomeStyle_cancelBtn__2W2Fg",editNameBox:"HomeStyle_editNameBox__1zQgl",nameEdit:"HomeStyle_nameEdit__1zPJx"}},22:function(e,t,a){e.exports={authDep:"AuthStyle_authDep__DFI3Z",authBundle:"AuthStyle_authBundle__2k9a4",authFormDep:"AuthStyle_authFormDep__24FY0",jasmineLogo:"AuthStyle_jasmineLogo__34T5J",authInput:"AuthStyle_authInput__vL4rd",authBtn:"AuthStyle_authBtn__2uuJ4",authToggle:"AuthStyle_authToggle__2gXkc"}},47:function(e,t,a){"use strict";a.r(t);var n=a(10),c=a.n(n),s=a(38),r=a.n(s),i=a(11),o=a(29),l=a(13),u=a(0),j=a.n(u),b=a(2),m=a(19),h=a(39),d=a(16),O=a(26),p=(Object(h.a)({apiKey:"AIzaSyCwMPOFdjb3yiuOIzv_dqGslqT-FKHa6jI",authDomain:"petal-may-jasmine.firebaseapp.com",projectId:"petal-may-jasmine",storageBucket:"petal-may-jasmine.appspot.com",messagingSenderId:"910260055972",appId:"1:910260055972:web:30915d50b935d624ca5b31"}),Object(m.d)()),x=Object(d.f)(),f=Object(O.c)(),v=a(22),y=a.n(v),g=a.p+"static/media/jasmineBtn.f12ca038.png",_=a(6),N=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(""),r=Object(i.a)(s,2),o=r[0],l=r[1],u=Object(n.useState)(!0),h=Object(i.a)(u,2),d=h[0],O=h[1],x=Object(n.useState)(""),f=Object(i.a)(x,2),v=f[0],N=f[1],w=function(e){var t=e.target,a=t.name,n=t.value;"email"===a?c(n):"password"===a&&l(n)},B=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!d){e.next=8;break}return e.next=5,Object(m.c)(p,a,o).then((function(e){e.user}));case 5:e.sent,e.next=9;break;case 8:Object(m.e)(p,a,o).then((function(e){e.user}));case 9:e.next=16;break;case 11:e.prev=11,e.t0=e.catch(1),n=e.t0.code,c=e.t0.message,N("".concat(n," ::: ").concat(c));case 16:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(_.jsxs)("div",{className:y.a.authFormDep,children:[Object(_.jsx)("img",{className:y.a.jasmineLogo,src:g,alt:"logo"}),Object(_.jsx)("span",{className:y.a.authToggle,onClick:function(){return O((function(e){return!e}))},children:d?"\uc774\ubbf8 \ud68c\uc6d0\uc774\uc2e0\uac00\uc694?":"\uacc4\uc815\uc744 \ub9cc\ub4e4\uace0 \uc2f6\uc2b5\ub2c8\ub2e4."}),Object(_.jsxs)("form",{onSubmit:B,children:[Object(_.jsx)("input",{name:"email",type:"email",className:y.a.authInput,onChange:w,value:a,placeholder:"\uc774\uba54\uc77c",required:!0}),Object(_.jsx)("br",{}),Object(_.jsx)("input",{name:"password",type:"password",className:y.a.authInput,onChange:w,value:o,placeholder:"\ube44\ubc00\ubc88\ud638",required:!0}),Object(_.jsx)("br",{}),Object(_.jsx)("input",{className:y.a.authBtn,type:"submit",value:d?"\uacc4\uc815\uc0dd\uc131":"\ub85c\uadf8\uc778"}),v]})]})},w=function(){var e=function(){var e=Object(b.a)(j.a.mark((function e(t){var a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"google"===(a=t.target.name)?n=new m.b:"github"===a&&(n=new m.a),e.next=4,Object(m.f)(p,n);case 4:e.sent;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(_.jsx)("div",{className:y.a.authDep,children:Object(_.jsxs)("div",{className:y.a.authBundle,children:[Object(_.jsx)(N,{}),Object(_.jsxs)("div",{children:[Object(_.jsxs)("button",{className:y.a.authBtn,onClick:e,name:"google",children:[Object(_.jsx)("ion-icon",{name:"logo-google",style:{color:"#D84315"}}),"With Google"]}),Object(_.jsxs)("button",{className:y.a.authBtn,onClick:e,name:"github",children:[Object(_.jsx)("ion-icon",{name:"logo-github"}),"With Github"]})]})]})})},B=a(33),S=a(12),k=a.n(S),H=function(e){var t=e.petalObj,a=e.isOwner,c=(e.userObj,Object(n.useState)(!1)),s=Object(i.a)(c,2),r=s[0],o=s[1],l=Object(n.useState)(t.text),u=Object(i.a)(l,2),m=u[0],h=u[1],p=Object(n.useState)(0),v=Object(i.a)(p,2),y=v[0],g=v[1],N=Object(d.d)(x,"petals",t.id),w=function(){var e=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("\uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")){e.next=7;break}return e.next=4,Object(d.c)(N);case 4:if(""===t.attachmentUrl){e.next=7;break}return e.next=7,Object(O.a)(Object(O.d)(f,t.attachmentUrl));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,Object(d.j)(N,{text:m});case 3:o(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=Object(n.useState)({}),I=Object(i.a)(H,2),U=I[0],C=I[1],D=function(){return o((function(e){return!e}))};return Object(_.jsxs)("div",{className:k.a.textBox,style:{position:"relative"},children:[Object(_.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(_.jsx)("h4",{style:{marginBottom:"5px"},children:t.writer}),Object(_.jsxs)("div",{style:{display:"flex"},children:[Object(_.jsx)("span",{style:{cursor:"pointer",transform:"translateY(-6px)"},onClick:function(e){e.target.id===t.id&&(C(Object(B.a)({},t)),console.log(U))},id:t.id,children:Object(_.jsx)("ion-icon",{name:"flower-outline",id:t.id})}),Object(_.jsxs)("span",{style:{display:"flex",cursor:"pointer",transform:"translateY(-6px)"},onClick:function(e){g(y+1)},children:[Object(_.jsx)("ion-icon",{name:"heart-circle-outline"}),Object(_.jsx)("small",{style:{color:"#bdbdbd",transform:"translateY(6px)"},children:y})]})]})]}),r?Object(_.jsxs)("div",{className:k.a.contentsBox,children:[Object(_.jsxs)("form",{onSubmit:S,children:[Object(_.jsx)("input",{className:k.a.homeInput,style:{width:"38px"},onChange:function(e){var t=e.target.value;h(t)},value:m,required:!0}),Object(_.jsx)("input",{className:k.a.editBtn,type:"submit",value:"\uc218\uc815"})]}),Object(_.jsx)("button",{className:k.a.cancelBtn,onClick:D,children:"\ucde8\uc18c"})]}):Object(_.jsxs)("div",{className:k.a.contentsBox,children:[Object(_.jsx)("p",{className:k.a.contents,children:t.text}),t.attachmentUrl&&Object(_.jsx)("div",{className:k.a.together,children:Object(_.jsx)("img",{src:t.attachmentUrl,width:"250px",height:"250px"})}),a&&Object(_.jsxs)("div",{className:k.a.ownBox,children:[Object(_.jsx)("button",{className:k.a.ownBtn,onClick:w,children:"\uc0ad\uc81c\ud558\uae30"}),Object(_.jsx)("button",{className:k.a.ownBtn,onClick:D,children:"\uc218\uc815\ud558\uae30"})]})]})]})},I=a(49),U=function(e){var t=e.userObj,a=Object(n.useState)(""),c=Object(i.a)(a,2),s=c[0],r=c[1],o=Object(n.useState)(""),l=Object(i.a)(o,2),u=l[0],m=l[1],h=Object(n.useRef)(null),p=function(){var e=Object(b.a)(j.a.mark((function e(a){var n,c,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),n="",""===u){e.next=10;break}return c=Object(O.d)(f,"".concat(t.uid,"/").concat(Object(I.a)())),e.next=6,Object(O.e)(c,u,"data_url");case 6:return i=e.sent,e.next=9,Object(O.b)(i.ref).catch((function(e){switch(console.log(e),e.code){case"storage/object-not-found":alert("File doesn't exist :: \ud30c\uc77c\uc744 \ucc3e\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4.");break;case"storage/unauthorized":alert("you doesn't have permission to access the object :: \uc120\ud0dd\ud558\uc2e0 \ud30c\uc77c\uc5d0 \uc811\uadfc\uc774 \ub418\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.");break;case"storage/canceled":alert("It's been canceled. :: \ucde8\uc18c\ub418\uc5c8\uc2b5\ub2c8\ub2e4.");break;case"storage/unknown":alert("Sorry, Please retry :: \uc8c4\uc1a1\ud569\ub2c8\ub2e4. \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.")}}));case 9:n=e.sent;case 10:return e.prev=10,e.next=13,Object(d.a)(Object(d.b)(x,"petals"),{text:s,createdAt:Date.now(),writerId:t.uid,writer:t.displayName,attachmentUrl:n});case 13:r(""),h.current.value=null,m(""),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(10),console.error("Error adding document: ",e.t0);case 21:case"end":return e.stop()}}),e,null,[[10,18]])})));return function(t){return e.apply(this,arguments)}}();return Object(_.jsx)("form",{onSubmit:p,children:Object(_.jsxs)("div",{className:k.a.textBox,children:[Object(_.jsx)("input",{value:s,onChange:function(e){e.preventDefault();var t=e.target.value;r(t)},className:k.a.homeInput,type:"text",placeholder:"\ub2f9\uc2e0\uc774 \uac00\uc7a5 \ube5b\ub098\ub294 \uc21c\uac04\uc744 \uae30\ub85d\ud558\uc138\uc694",maxLength:140,required:!0}),Object(_.jsxs)("small",{style:{color:"#424242",textAlign:"right"},children:["*(",s.length,"/140)"]}),Object(_.jsxs)("div",{className:k.a.together,children:[Object(_.jsx)("input",{type:"file",className:k.a.homeFileBox,ref:h,accept:"image/*",onChange:function(e){var t=e.target.files[0],a=new FileReader;a.onloadend=function(e){var t=e.currentTarget.result;m(t)},Boolean(t)&&a.readAsDataURL(t)}}),u&&Object(_.jsxs)("div",{className:k.a.viewBox,children:[Object(_.jsx)("img",{src:u,alt:"preview photo",width:"70px",height:"70px"}),Object(_.jsx)("button",{className:k.a.clearBtn,onClick:function(){h.current.value=null,m("")},children:"Clear"})]})]}),Object(_.jsx)("input",{type:"submit",className:k.a.homeLi,value:"\uae30\ub85d\ud558\uae30"})]})})},C=function(e){var t=e.userObj,a=Object(n.useState)([]),c=Object(i.a)(a,2),s=c[0],r=c[1];return Object(n.useEffect)((function(){var e=Object(d.i)(Object(d.b)(x,"petals"),Object(d.h)("createdAt","desc"));Object(d.g)(e,(function(e){var t=e.docs.map((function(e){return Object(B.a)({id:e.id},e.data())}));r(t)}))}),[]),Object(_.jsxs)("div",{className:k.a.homeDep,children:[Object(_.jsx)(U,{userObj:t}),Object(_.jsx)("div",{children:s.map((function(e){return Object(_.jsx)(H,{petalObj:e,userObj:t,isOwner:e.writerId===t.uid},e.id)}))})]})},D=function(e){var t=e.userObj;return Object(_.jsx)("nav",{className:k.a.homeNav,children:Object(_.jsxs)("ul",{className:k.a.homeUl,children:[Object(_.jsx)("li",{className:k.a.homeLi,children:Object(_.jsxs)(o.b,{to:"/",className:k.a.homeLink,children:[Object(_.jsx)("ion-icon",{name:"flower-outline"}),"Home"]})}),Object(_.jsx)("li",{children:Object(_.jsx)("h1",{className:k.a.logoName,children:"Petal, May Jasmine"})}),Object(_.jsx)("li",{className:k.a.homeLi,children:Object(_.jsxs)(o.b,{to:"/profile",className:k.a.homeLink,children:[Object(_.jsx)("ion-icon",{name:"person-circle-outline"}),t.displayName,"'s Profile"]})})]})})},L=function(e){var t=e.userObj,a=e.refreshUser,c=Object(l.f)(),s=Object(n.useState)([]),r=Object(i.a)(s,2),o=r[0],u=r[1],h=Object(n.useState)(t.displayName),O=Object(i.a)(h,2),f=O[0],v=O[1],y=function(){var e=Object(b.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),f===t.displayName){e.next=7;break}return e.next=4,Object(m.h)(p.currentUser,{displayName:f});case 4:a(),e.next=8;break;case 7:t.displayName===f&&alert("\uae30\uc874 \uc774\ub984\uc73c\ub85c\ub294 \ubc14\uafc0 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(b.a)(j.a.mark((function e(){var a,n,c,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(d.b)(x,"petals"),n=Object(d.i)(a,Object(d.k)("writerId","==","".concat(t.uid)),Object(d.h)("createdAt","desc")),e.next=4,Object(d.e)(n);case 4:c=e.sent,s=[],c.forEach((function(e){return s[s.length]={myText:e.data().text,myUrl:e.data().attachmentUrl}})),u(s);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){null==t.displayName&&Object(m.h)(p.currentUser,{displayName:"jasmine"}),g()}),[]),Object(_.jsxs)("div",{className:k.a.homeDep,children:[Object(_.jsxs)("div",{className:k.a.editNameBox,children:[Object(_.jsx)("h3",{children:"\uc774\ub984\uc744 \uc124\uc815\ud558\uace0 \ubcc0\uacbd\ud558\uc138\uc694!"}),Object(_.jsxs)("form",{className:k.a.together,onSubmit:y,children:[Object(_.jsx)("input",{className:k.a.nameEdit,type:"text",value:f,onChange:function(e){var t=e.target.value;v(t)},placeholder:"Display Name"}),Object(_.jsx)("input",{type:"submit",className:k.a.clearBtn,value:"\uc774\ub984\ubc14\uafb8\uae30"})]}),Object(_.jsx)("button",{onClick:function(){Object(m.g)(p).then((function(){return c("/",{replace:!0})})).catch((function(e){alert("\uc8c4\uc1a1\ud569\ub2c8\ub2e4. \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694!")}))},style:{marginTop:"15px",marginLeft:"50px",width:"400px"},className:k.a.clearBtn,children:"\ub85c\uadf8\uc544\uc6c3"})]}),Object(_.jsx)("div",{className:k.a.homeDep,children:o.map((function(e,a){return Object(_.jsxs)("div",{className:k.a.textBox,children:[Object(_.jsx)("h4",{style:{marginBottom:"5px"},children:t.displayName}),Object(_.jsx)("p",{className:k.a.contents,children:e.myText}),e.myUrl&&Object(_.jsx)("div",{className:k.a.together,children:Object(_.jsx)("img",{src:e.myUrl,width:"250px",height:"250px"})})]},a)}))})]})};var F=function(e){var t=e.isLoggedIn,a=e.userObj,n=e.refreshUser;return Object(_.jsxs)(o.a,{children:[t&&Object(_.jsx)(D,{userObj:a}),Object(_.jsx)(l.c,{children:t?Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(l.a,{path:"/",element:Object(_.jsx)(C,{userObj:a})}),Object(_.jsx)(l.a,{path:"/profile",element:Object(_.jsx)(L,{refreshUser:n,isLoggedIn:t,userObj:a})})]}):Object(_.jsx)(l.a,{path:"/",element:Object(_.jsx)(w,{})})})]})};var A=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(null),r=Object(i.a)(s,2),o=r[0],l=r[1];return Object(n.useEffect)((function(){p.onAuthStateChanged((function(e){e?(null===e.displayName&&Object(m.h)(e,{displayName:"jasmine"}),l({uid:e.uid,displayName:e.displayName,updateProfile:function(t){return Object(m.h)(e,t)}})):l(!1),c(!0)}))}),[]),Object(_.jsx)("div",{className:y.a.settingApp,children:a?Object(_.jsx)(F,{isLoggedIn:Boolean(o),refreshUser:function(){l({uid:p.currentUser.uid,displayName:p.currentUser.displayName})},userObj:o}):"initializing..."})};r.a.render(Object(_.jsx)(c.a.StrictMode,{children:Object(_.jsx)(A,{})}),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.2af3323e.chunk.js.map